<?xml version="1.0"?>
<workflow name="A13dot1" desc="【A13.1】缺陷故障管理" current_event="">
  <paramtable>
    <param name="submit_user" desc="提交人" type="string">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="submit_time" desc="装置提报时间" type="string">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
      </linkevents>
    </param>
    <param name="Cj_Name" desc="车间名称" type="string">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="Zz_Name" desc="装置名称" type="string">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="Equip_GyCode" desc="设备工艺编号" type="string">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="Equip_Code" desc="设备编号" type="string">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="Equip_Type" desc="设备型号" type="string">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="Problem_Desc" desc="设备问题描述" type="string">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="Problem_DescFilePath" desc="设备问题描述文档（附件）" type="string">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="Zy_Type" desc="问题专业分类" type="string">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="Equip_Id" desc="设备ID" type="int">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="submit_done" desc="提交完成" type="bool">
      <linkevents>
        <linkevent>submition</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="catlog_type" desc="片区分类-问题类型" type="string">
      <linkevents>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="defect_level" desc="片区分类-缺陷等级" type="string">
      <linkevents>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="fault_intensity" desc="片区分类-故障强度等级" type="string">
      <linkevents>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="temp_A5dot1" desc="" type="bool">
      <linkevents>
        <linkevent>A5dot1</linkevent>
      </linkevents>
    </param>
    <param name="temp_A11dot2" desc="" type="bool">
      <linkevents>
        <linkevent>A11dot2</linkevent>
      </linkevents>
    </param>
    <param name="Confirmed" desc="专业团队审核结果" type="bool">
      <linkevents>
        <linkevent>Confirm</linkevent>
      </linkevents>
    </param>
    <param name="temp_A13dot2" desc="" type="bool">
      <linkevents>
        <linkevent>A13dot2</linkevent>
      </linkevents>
    </param>
    <param name="temp_A8dot2" desc="" type="bool">
      <linkevents>
        <linkevent>A8dot2</linkevent>
      </linkevents>
    </param>
    <param name="temp_ModuleName" desc="" type="string">
      <linkevents>
        <linkevent>Catalog</linkevent>
        <linkevent>Confirm</linkevent>
        <linkevent>A5dot1</linkevent>
        <linkevent>A11dot2</linkevent>
        <linkevent>A13dot2</linkevent>
        <linkevent>A8dot2</linkevent>
      </linkevents>
    </param>
  </paramtable>
  <events>
    <event name="submition" desc="装置提报缺陷" type="normlevent">
      <actions>
        <beforeaction><![CDATA[]]></beforeaction>
        <currentaction><![CDATA[/A13dot1/ZzSubmit]]></currentaction>
        <afteraction><![CDATA[]]></afteraction>
      </actions>
      <authority><![CDATA[]]></authority>
    </event>
    <event name="Catalog" desc="片区缺陷分类" type="normlevent">
      <actions>
        <beforeaction><![CDATA[]]></beforeaction>
        <currentaction><![CDATA[/A13dot1/PqCatalog]]></currentaction>
        <afteraction><![CDATA[]]></afteraction>
      </actions>
      <authority><![CDATA[]]></authority>
    </event>
    <event name="A5dot1" desc="跳转到【A5.1】设备完好" type="normlevent">
      <actions>
        <beforeaction><![CDATA[]]></beforeaction>
        <currentaction><![CDATA[/A13dot1/JumpToAx]]></currentaction>
        <afteraction><![CDATA[]]></afteraction>
      </actions>
      <authority><![CDATA[]]></authority>
    </event>
    <!--如果一个事件是跳转事件， 需要将type设为 subprocess-->
    <event name="A11dot2" desc="跳转到【A11.2】设备隐患排查" type="subprocess">
      <actions>
        <beforeaction><![CDATA[]]></beforeaction>
        <!--一旦一个事件是 subprocess 类型， 则currentaction无效， 指定与不指定将都为空-->
        <currentaction><![CDATA[/A13dot1/JumpToAx]]></currentaction>
        <afteraction><![CDATA[]]></afteraction>
      </actions>
      <authority><![CDATA[]]></authority>
      <!-- linkworkflow 子流程描述节点-->
      <!--name 跳转工作流名称， workingmodel工作方式： serial串行， parallel并行-->
      <linkworkflow name="A11dot2" workingmodel="parallel">
        <!--paramtransfer 变量传值方式-->
        <paramtransfer>
          <!--parent: 本流程变量名， child:子流程变量名, direction: to, from-->
          <!--to: parent -> child-->
          <!--from: child -> parent-->
          <!--说明： 传递变量值时，应确保子流程的下一个流程能跳转过至少一个业务逻辑节点-->
          <!-- 如： 假设本流程是另外一个流程A的子流程， 则在A的XML文档定义paramtransfer 时，一定要传一个为true的变量值给本流程的submit_done-->
          <!--已确保提报事件能自动执行-->
          <item parent="submit_user" child="submit_user" direction="to"/>
          <item parent="Cj_Name" child="Cj_Name" direction="to"/>
          <item parent="Zz_Name" child="Zz_Name" direction="to"/>
          <item parent="Equip_GyCode" child="Equip_GyCode" direction="to"/>
          <item parent="Equip_Code" child="Equip_Code" direction="to"/>
          <item parent="Equip_Type" child="Equip_Type" direction="to"/>
          <item parent="Problem_Desc" child="Problem_Desc" direction="to"/>
          <item parent="Problem_DescFilePath" child="Problem_DescFilePath" direction="to"/>
          <item parent="Zy_Type" child="Zy_Type" direction="to"/>
          <item parent="submit_done" child="submit_done" direction="to"/>
        </paramtransfer>
      </linkworkflow>
    </event>
    <event name="Confirm" desc="专业团队审核" type="normlevent">
      <actions>
        <beforeaction><![CDATA[]]></beforeaction>
        <currentaction><![CDATA[/A13dot1/ZytdConfirm]]></currentaction>
        <afteraction><![CDATA[]]></afteraction>
      </actions>
      <authority><![CDATA[]]></authority>
    </event>
    <event name="A13dot2" desc="跳转到【A13.2】DRBPM紧急检修计划" type="normlevent">
      <actions>
        <beforeaction><![CDATA[]]></beforeaction>
        <currentaction><![CDATA[/A13dot1/JumpToAx]]></currentaction>
        <afteraction><![CDATA[]]></afteraction>
      </actions>
      <authority><![CDATA[]]></authority>
    </event>
    <event name="A8dot2" desc="跳转到【A8.2】检修计划实施管理" type="normlevent">
      <actions>
        <beforeaction><![CDATA[]]></beforeaction>
        <currentaction><![CDATA[/A13dot1/JumpToAx]]></currentaction>
        <afteraction><![CDATA[]]></afteraction>
      </actions>
      <authority><![CDATA[]]></authority>
    </event>
    <event name="SE" desc="Start" type="startevent">
      <actions>
        <beforeaction><![CDATA[]]></beforeaction>
        <currentaction><![CDATA[]]></currentaction>
        <afteraction><![CDATA[]]></afteraction>
      </actions>
      <authority><![CDATA[]]></authority>
    </event>
    <event name="EE" desc="End" type="endevent">
      <actions>
        <beforeaction><![CDATA[]]></beforeaction>
        <currentaction><![CDATA[]]></currentaction>
        <afteraction><![CDATA[]]></afteraction>
      </actions>
      <authority><![CDATA[]]></authority>
    </event>    
  </events>
  <flows>
    <flow source="SE" destination="submition">
      <condition><![CDATA[1 == 1]]></condition>
    </flow>
    <flow source="submition" destination="Catalog">
      <condition><![CDATA[submit_done == true]]></condition>
    </flow>
    <flow source="Catalog" destination="A5dot1">
      <condition><![CDATA[catlog_type == "完好类"]]></condition>
    </flow>
    <flow source="A5dot1" destination="EE">
      <condition><![CDATA[temp_A5dot1 == true]]></condition>
    </flow>
    <flow source="Catalog" destination="A11dot2">
      <condition><![CDATA[catlog_type == "隐患"]]></condition>
    </flow>
    <flow source="A11dot2" destination="EE">
      <condition><![CDATA[1 == 1]]></condition>
    </flow>
    <flow source="Catalog" destination="Confirm">
      <condition><![CDATA[catlog_type == "故障"]]></condition>
    </flow>
    <flow source="Confirm" destination="A13dot2">
      <condition><![CDATA[Confirmed == true]]></condition>
    </flow>
    <flow source="A13dot2" destination="EE">
      <condition><![CDATA[temp_A13dot2 == true]]></condition>
    </flow>
    <flow source="Catalog" destination="EE">
      <condition><![CDATA[catlog_type == "不需处理"]]></condition>
    </flow>
    <flow source="A8dot2" destination="EE">
      <condition><![CDATA[temp_A8dot2 == true]]></condition>
    </flow>
  </flows>
  <recorditems>
    <item>username</item>
    <item>time</item>
  </recorditems>
</workflow>
